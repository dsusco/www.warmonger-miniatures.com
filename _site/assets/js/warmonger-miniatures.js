jQuery.fn.extend({accessibleToggle:function(accessibleToggleOptions={}){return this.each(function(){function hide(e=null,t={}){var n="";if(!$toggle.hasClass("hiding")){$toggle.addClass("hiding").animateCss(options.hidingAnimation).trigger("accessibleToggle:hiding"),$control.addClass("hiding-toggle");try{n=$($toggle.attr("aria-labelledby").split(" ").map(function(e){return document.getElementById(e)})).removeClass("shown-toggle").addClass("hidden-toggle").attr("aria-expanded",!1).toArray().reduce(function(e,t){return e+" "+t.getAttribute("id")},"")}catch(o){}$toggle.attr("aria-labelledby",n.trim()),$toggle.hasEvent("animationend")?$toggle.one("animationend",hideToggle):hideToggle(),!0===t.stopPropagation&&e.stopPropagation()}}function hideToggle(){$control.removeClass("hiding-toggle"),$toggle.prop("hidden",!0).removeClass("hiding").trigger("accessibleToggle:hidden")}function show(e=null,t={}){var n="";if(!$toggle.hasClass("showing")){$toggle.addClass("showing").animateCss(options.showingAnimation).trigger("accessibleToggle:showing"),$control.addClass("showing-toggle");try{$($parent.data("accessible-toggle-children")).filter(":visible").not($toggle).trigger("accessibleToggle:hide.baseline",{stopPropagation:!0})}catch(o){}try{n=$($toggle.attr("aria-labelledby").split(" ").map(function(e){return document.getElementById(e)})).removeClass("hidden-toggle").addClass("shown-toggle").attr("aria-expanded",!0).toArray().reduce(function(e,t){return e+" "+t.getAttribute("id")},"")}catch(o){}$toggle.attr("aria-labelledby",n.trim()).prop("hidden",!1),$toggle.hasEvent("animationend")?$toggle.one("animationend",showToggle):showToggle(),!0===t.stopPropagation&&e.stopPropagation()}}function showToggle(){$control.removeClass("showing-toggle"),$toggle.removeClass("showing").trigger("accessibleToggle:shown")}function toggleClick(e){$toggle.is(":visible")?hide(e):show(e)}var $toggle=$(this),options=$.extend({hidingAnimation:!1,showingAnimation:!1},$toggle.data(),accessibleToggleOptions),$control,$parent;try{$control=$(options.control)}catch(e){"#"===options.control.charAt(0)&&($control=$(document.getElementById(options.control.substr(1))))}try{$parent=$(options.parent).first()}catch(e){"#"===options.parent.charAt(0)&&($parent=$(document.getElementById(options.parent.substr(1))))}$toggle.id("accessible_toggle").addClass("accessible-toggle"),$control.id("accessible_toggle_control").addClass("accessible-toggle-control").attr("aria-controls",function(t,n){try{n=n.split(" ")}catch(e){n=[]}return n.indexOf($toggle.attr("id"))<0&&n.push($toggle.attr("id")),n.join(" ").trim()}).prop("disabled",!1).not("a[href], link[href], button, input, select, textarea").attr("tabindex",0),$parent.data("accessible-toggle-children",($parent.data("accessible-toggle-children")||[]).concat(this)),$toggle.attr("aria-labelledby",function(t,n){try{n=n.split(" ")}catch(e){n=[]}return $control.each(function(){var e=$(this).attr("id");n.indexOf(e)<0&&n.push(e)}),n.join(" ").trim()}),$toggle.hasEventHandler("accessibleToggle:hide.baseline",hide)&&$toggle.hasEventHandler("accessibleToggle:show.baseline",show)||($toggle.on("accessibleToggle:hide.baseline",hide).on("accessibleToggle:show.baseline",show),$(window).on("resize",function(){var hidden=options.hidden===undefined?$toggle.is(":hidden"):eval(options.hidden);$toggle.prop("hidden",hidden),$control.removeClass("shown-toggle hidden-toggle").addClass(hidden?"hidden-toggle":"shown-toggle").attr("aria-expanded",!hidden)}).trigger("resize")),$control.hasEventHandler("click",toggleClick)||$control.on("click",toggleClick).not('button, [type="button"], [type="image"], [type="reset"], [type="submit"]').on("keypress",function(e){"Enter"===e.key&&toggleClick(e)})})}}),jQuery.extend(jQuery.expr.pseudos,{"all-focusable":function(e){var t,n,o=$(e),a=o.attr("tabindex")!==undefined&&+o.attr("tabindex")>-1,i=e.nodeName.toLowerCase(),l=!1;return"a"===i?l=e.href||a:"area"===i?(n=(t=e.parentNode).name,e.href&&n&&"map"===t.nodeName.toLowerCase()&&(l=$("img[usemap='#"+n+"']")[0])):l=!!/^(button|input|object|select|textarea)$/.test(i)||a,l}}),window.animateClasses=["bounce","flash","pulse","rubberBand","shake","swing","tada","wobble","jello","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","fadeOut","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutRightBig","fadeOutUp","fadeOutUpBig","flip","flipInX","flipInY","flipOutX","flipOutY","lightSpeedIn","lightSpeedOut","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","slideInUp","slideInDown","slideInLeft","slideInRight","slideOutUp","slideOutDown","slideOutLeft","slideOutRight","zoomIn","zoomInDown","zoomInLeft","zoomInRight","zoomInUp","zoomOut","zoomOutDown","zoomOutLeft","zoomOutRight","zoomOutUp","hinge","jackInTheBox","rollIn","rollOut"],jQuery.fn.extend({animateCss:function(e){return window.animateClasses.indexOf(e)<0?this:(e+=" animated",this.each(function(){var t=$(this);t.addClass(e).one("animationend",function(){t.removeClass(e)})}))}}),jQuery.extend(jQuery.expr.pseudos,{focusable:function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}var n,o,a,i=$(e),l=i.attr("tabindex")!==undefined&&+i.attr("tabindex")>-1,s=e.nodeName.toLowerCase(),r=!1;return"a"===s?r=e.href||l:"area"===s?(a=(o=e.parentNode).name,e.href&&a&&"map"===o.nodeName.toLowerCase()&&(r=$("img[usemap='#"+a+"']")[0])):/^(button|input|object|select|textarea)$/.test(s)?(r=!e.disabled)&&(n=i.closest("fieldset")[0])&&!i.closest("legend")[0]&&(r=!n.disabled):r=l,r&&i.is(":visible")&&t(i)}}),jQuery.fn.extend({hasEvent:function(e){var t="";(e=e.split(".")).length>1?(t=e.pop(),e=e.join(".")):e=e.pop();try{return!!$._data(this[0],"events")[e].find(function(e){return""===t||t===e.namespace})}catch(n){return!1}}}),jQuery.fn.extend({hasEventHandler:function(e,t){try{return this.hasEvent(e)&&!!$._data(this[0],"events")[e.replace(/\.[^.]+$/,"")].find(function(e){return t.toString()===e.handler.toString()})}catch(n){return!1}}}),jQuery.fn.extend({id:function(e="baseline"){return this.each(function(){"string"==typeof this.id&&""!==this.id||(this.id=_.uniqueId(e+"_"))})}}),jQuery.fn.extend({modal:function(modalOptions={}){return this.each(function(){function close(e){var t="";if(!$modal.hasClass("closing")){$modal.addClass("closing").trigger("modal:closing"),$control.addClass("closing-toggle"),e!==undefined&&$modal.is(":visible")&&options.closingAnimation&&$modal.animateCss(options.closingAnimation),$(document).off("click",closeOnClick).off("keydown",closeOnEsc);try{t=$($modal.attr("aria-labelledby").split(" ").map(function(e){return document.getElementById(e)})).removeClass("opened").addClass("closed").attr("aria-expanded",!1).toArray().reduce(function(e,t){return e+" "+t.getAttribute("id")},"")}catch(n){}$modal.attr("aria-labelledby",t.trim()),$modal.hasEvent("animationend")?$modal.one("animationend",closeModal):closeModal()}}function closeModal(){$modal.prop("hidden",!0),$("[data-tabindex]").each(function(){var $el=$(this);$el.attr("tabindex",eval($el.attr("data-tabindex"))).attr("data-tabindex",null)}),$parent.removeClass("modal-overlay"),$($modal.data("last-focus")).focus(),$control.removeClass("closing-toggle"),$modal.removeClass("closing").trigger("modal:closed")}function closeOnEsc(e){"Escape"===e.key&&close(e)}function closeOnClick(e){var t=$(e.target);(t.hasClass("close")||!t.parent().closest($modal).length&&!t.is($control))&&(close(e),e.preventDefault())}function open(e){var t=$(document),n="";if(!$modal.hasClass("opening")){$modal.addClass("opening").trigger("modal:opening"),$control.addClass("opening-toggle"),e!==undefined&&$modal.is(":hidden")&&options.openingAnimation&&$modal.animateCss(options.openingAnimation),t.hasEventHandler("click",closeOnClick)||t.on("click",closeOnClick),t.hasEventHandler("keydown",closeOnEsc)||t.on("keydown",closeOnEsc);try{n=$($modal.attr("aria-labelledby").split(" ").map(function(e){return document.getElementById(e)})).removeClass("closed").addClass("opened").attr("aria-expanded",!0).toArray().reduce(function(e,t){return e+" "+t.getAttribute("id")},"")}catch(o){}$modal.attr("aria-labelledby",n.trim()),$modal.data("last-focus",document.activeElement),$parent.addClass("modal-overlay"),$(":all-focusable").not($(":all-focusable",$modal)).not("[tabindex^=-]").each(function(){var e=$(this);e.attr("data-tabindex",e.attr("tabindex")||"null").attr("tabindex","-1")}),$modal.prop("hidden",!1),$modal.hasEvent("animationend")?$modal.one("animationend",openModal):openModal()}}function openModal(){$modal.find(":focusable").first().focus(),$modal.find(".modal-body").scrollTop(0),$control.removeClass("opening-toggle"),$modal.removeClass("opening").trigger("modal:opened")}var $modal=$(this),options=$.extend({closingAnimation:!1,open:!0,openingAnimation:!1,parent:"body > div:first-of-type"},$modal.data(),modalOptions),$control,$parent;try{$control=$(options.control)}catch(e){"#"===options.control.charAt(0)&&($control=$(document.getElementById(options.control.substr(1))))}try{$parent=$(options.parent).first()}catch(e){"#"===options.parent.charAt(0)&&($parent=$(document.getElementById(options.parent.substr(1))))}$parent.length||($parent=$("body")),$modal.id("modal").addClass("modal"),$control.id("modal_control").addClass("modal-control").attr("aria-controls",function(t,n){try{n=n.split(" ")}catch(e){n=[]}return n.indexOf($modal.attr("id"))<0&&n.push($modal.attr("id")),n.join(" ").trim()}).prop("disabled",!1),$modal.attr("aria-labelledby",function(t,n){try{n=n.split(" ")}catch(e){n=[]}return $control.each(function(){var e=$(this).attr("id");n.indexOf(e)<0&&n.push(e)}),n.join(" ").trim()}),$modal.hasEventHandler("modal:close.baseline",close)&&$modal.hasEventHandler("modal:open.baseline",open)||$modal.on("modal:close.baseline",close).on("modal:open.baseline",open).appendTo($parent),$control.hasEventHandler("click",open)||$control.on("click",open).not('button, [type="button"], [type="image"], [type="reset"], [type="submit"]').on("keypress",function(e){"Enter"===e.key&&open(e)}),options.open?open():close()})}}),jQuery.fn.extend({slideshow:function(e={}){return this.each(function(){var t=$(this).wrapInner('<div class="slides">'),n=t.children().children(),o=$('<div class="paginator">'),a=$.extend({activeSlide:0,entranceAnimation:"slideInRight",exitAnimation:"slideOutLeft",interval:3e3,keyboard:!0,pager:!0,paginator:!0,reverse:!1,wrap:!0},t.data(),e);o.append(n.toArray().map(function(e,n){return $("<button>").append($('<span class="sr-only">').text("Show Slide "+(n+1))).on("click",function(){t.trigger("slideshow:slide.baseline",n)})})),a.paginator&&t.prepend(o),a.pager&&t.prepend($('<div class="pager">').append($('<button class="previous">').append($('<span class="sr-only">').text("Show Previous Slide")).on("click",function(){t.trigger("slideshow:previous.baseline")}),$('<button class="next">').append($('<span class="sr-only">').text("Show Next Slide")).on("click",function(){t.trigger("slideshow:next.baseline")}))),t.on("mouseenter",function(){t.addClass("hovered")}).on("focusin mouseenter touchstart slideshow:pause.baseline",function(){t.addClass("paused")}).on("mouseleave",function(){t.removeClass("hovered")}).on("focusout mouseleave touchend slideshow:resume.baseline",function(){t.find(document.activeElement).length<1&&!t.hasClass("hovered")&&t.removeClass("paused")}).on("keydown slideshow:next.baseline",function(e){var o=n.filter(".active").index();(e.key===undefined||a.keyboard&&"ArrowRight"===e.key)&&t.trigger("slideshow:slide.baseline",o===n.length-1?0:o+1)}).on("keydown slideshow:previous.baseline",function(e){var o=n.filter(".active").index();(e.key===undefined||a.keyboard&&"ArrowLeft"===e.key)&&t.trigger("slideshow:slide.baseline",0===o?n.length-1:o-1)}).on("slideshow:slide.baseline",function(e,i=0){function l(){(r.is(":focus")||r.find(":focus").length>0)&&(d.is(":focusable")?d.first().focus():d.find(":focusable").first().focus()),d.removeClass("entering"),t.removeClass("sliding").trigger("slideshow:slid",c)}function s(){r.removeClass("active exiting")}i=$.extend({animate:!0,slide:"number"==typeof i?i:i.slide},i);var r=n.filter(".active"),d=n.eq(+i.slide),c={$fromSlide:r,$toSlide:d,fromIndex:r.index(),toIndex:+i.slide};t.hasClass("sliding")||(t.addClass("sliding").trigger("slideshow:sliding",c),i.animate&&a.exitAnimation?r.addClass("exiting").animateCss(a.exitAnimation).one("animationend",s):s(),o.children().eq(c.fromIndex).removeClass("active").prop("disabled",!1),o.children().eq(c.toIndex).prop("disabled",!0).add(d.addClass("entering")).addClass("active"),i.animate&&a.entranceAnimation?d.animateCss(a.entranceAnimation).one("animationend",l):l())}).trigger("slideshow:slide.baseline",{animate:!1,slide:a.activeSlide}),a.interval&&(a.intervalID=setInterval(function(){t.is(".paused")||(a.afterFirstInterval&&!a.wrap&&n.filter(".active").index()===+a.activeSlide?clearInterval(a.intervalID):a.reverse?t.trigger("slideshow:previous.baseline"):t.trigger("slideshow:next.baseline"),a.afterFirstInterval=!0)},a.interval))})}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],a=0;a<n;){var i=t[a];if(e.call(o,i,a,t))return i;a++}return undefined},configurable:!0,writable:!0}),Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),o=n.length>>>0,a=0;if(arguments.length>=2)t=arguments[1];else{for(;a<o&&!(a in n);)a++;if(a>=o)throw new TypeError("Reduce of empty array with no initial value");t=n[a++]}for(;a<o;)a in n&&(t=e(t,n[a],a,n)),a++;return t}}),$(function(){$("body.no-js").toggleClass("js no-js"),$('a[href^="mailto:"]').each(function(){var e=$(this);e.attr("href",e.attr("href").replace(/\s*\[at\]\s*/gi,"@").replace(/\s*\[dot\]\s*/gi,".")).html(e.html().replace(/\s*\[at\]\s*/gi,"@").replace(/\s*\[dot\]\s*/gi,"."))})}),$(function(){var e=$("#modal").modal({closingAnimation:"fadeOut",control:$(".card.image a, .shared-images .images a"),open:!1,openingAnimation:"fadeIn"}),t=$(".slideshow").has("> * + *").slideshow().on("slideshow:sliding",function(t,n){e.is(':visible:not(".ignore-slideshow-slide")')&&e.data("last-focus",n.$toSlide.find(":all-focusable").get(0))});$("#sidebar").accessibleToggle(),$("#news ul[data-control], #store ul[data-control]").each(function(){var e=$(this);e.accessibleToggle({hidden:!e.has("a:not([href])").length&&e.prev("a[href]").length,parent:e.parent().closest("ul")})}),$(".card.image").on("click","a",function(n,o={}){function a(n,o){return e.one("modal:opened",function(){e.data("last-focus",t.find(".active :focusable").get(0))}),n.trigger("click",{focus:o}),!1}var i=$(n.currentTarget),l=$(n.delegateTarget),s=l.prev(".card.image").find("a"),r=l.next(".card.image").find("a");return s.length||(s=l.nextUntil(":not(.card.image)").last().find("a")),r.length||(r=l.prevUntil(":not(.card.image)").last().find("a")),e.find(".modal-title").text(i.find("figcaption").text()),e.find(".modal-body").html($("<img>").attr("alt",i.find("img").attr("alt")).attr("src",i.attr("href"))).append($('<div class="pager">').append($('<button class="small previous">').prop("hidden",s.length<1).text("Previous").one("click",function(){return a(s,".previous")}),$('<button class="small next">').prop("hidden",r.length<1).text("Next").one("click",function(){return a(r,".next")}))),e.find(o.focus).focus(),!1}),$(".shared-images .images a").on("click",function(){function t(t){return e.one("modal:opened",function(){e.data("last-focus",t.get(0))}),t.trigger("click"),!1}var n=$(this),o=n.prev("a"),a=n.next("a");return o.length||(o=n.nextUntil(":not(a)").last()),a.length||(a=n.prevUntil(":not(a)").last()),e.addClass("ignore-slideshow-slide").one("modal:closed",function(){e.removeClass("ignore-slideshow-slide")}),e.find(".modal-title").html(function(){var e="Shared by ";return""!==n.data("modal-title-url")?e+=$("<a>").attr("href",n.data("modal-title-url")).attr("target","_blank").text(n.data("modal-title")).get(0).outerHTML:e+=n.data("modal-title"),e}),e.find(".modal-body").html($("<img>").attr("alt",n.find("img").attr("alt")).attr("src",n.attr("href"))).append($('<div class="pager">').append($('<button class="small previous">').prop("hidden",o.length<1).text("Previous").one("click",function(){return t(o)}),$('<button class="small next">').prop("hidden",a.length<1).text("Next").one("click",function(){return t(a)}))),!1}),e.swipe({swipeLeft:function(){e.find(".modal-body .pager .next").click()},swipeRight:function(){e.find(".modal-body .pager .previous").click()},swipeUp:function(){e.trigger("modal:close")}})});
